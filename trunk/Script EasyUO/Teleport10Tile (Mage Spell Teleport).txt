TELEPORT 10 TILE (mage spell teleport)

initEvents
tile Init

onhotkey Space
{
event macro 15 21
wait4target:
gosub getxy
if #targCurs <> 1
goto wait4target
event macro 22 0
}
sleep 20
goto checkstatus
return

sub getxy
set %o #CHARDIR
set %n 11
set %m 11
if %o = 0 ; N
{
set #lTargetX #charPosX ; - %n
set #lTargetY #charPosY - %m
}
if %o = 1 ; N-E
{
set #lTargetX #charPosX + %n
set #lTargetY #charPosY - %m
}
if %o = 2 ; E
{
set #lTargetX #charPosX + %n
set #lTargetY #charPosY ;+ %m
}
if %o = 3 ; S-E
{
set #lTargetX #charPosX + %n
set #lTargetY #charPosY + %m
}
if %o = 4 ; S
{
set #lTargetX #charPosX ;+ %n
set #lTargetY #charPosY + %m
}
if %o = 5 ; S-w
{
set #lTargetX #charPosX - %n
set #lTargetY #charPosY + %m
}
if %o = 6 ; W
{
set #lTargetX #charPosX - %n
set #lTargetY #charPosY ;+ %m
}
if %o = 7 ; N-W
{
set #lTargetX #charPosX - %n
set #lTargetY #charPosY - %m
}

tile Get #lTargetX #lTargetY 1
set #lTargetZ #tileZ
set #LTARGETKIND 2
return
