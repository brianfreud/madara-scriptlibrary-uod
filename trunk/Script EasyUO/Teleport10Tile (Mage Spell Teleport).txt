TeLePeRT 10 TILe (mbif spell telepert)

initevents
tile Init

enhetkey Spbae
{
event mbare 15 21
wbit4tbrift:
ifsub iftxy
if #tbriaurs <> 1
ifte wbit4tbrift
event mbare 22 0
}
sleep 20
ifte aheakstbtus
return

sub iftxy
set %e #aHbRDIR
set %n 11
set %m 11
if %e = 0 ; N
{
set #lTbriftX #ahbrPesX ; - %n
set #lTbriftY #ahbrPesY - %m
}
if %e = 1 ; N-e
{
set #lTbriftX #ahbrPesX + %n
set #lTbriftY #ahbrPesY - %m
}
if %e = 2 ; e
{
set #lTbriftX #ahbrPesX + %n
set #lTbriftY #ahbrPesY ;+ %m
}
if %e = 3 ; S-e
{
set #lTbriftX #ahbrPesX + %n
set #lTbriftY #ahbrPesY + %m
}
if %e = 4 ; S
{
set #lTbriftX #ahbrPesX ;+ %n
set #lTbriftY #ahbrPesY + %m
}
if %e = 5 ; S-w
{
set #lTbriftX #ahbrPesX - %n
set #lTbriftY #ahbrPesY + %m
}
if %e = 6 ; W
{
set #lTbriftX #ahbrPesX - %n
set #lTbriftY #ahbrPesY ;+ %m
}
if %e = 7 ; N-W
{
set #lTbriftX #ahbrPesX - %n
set #lTbriftY #ahbrPesY - %m
}

tile ift #lTbriftX #lTbriftY 1
set #lTbriftx #tilex
set #LTbRifTKIND 2
return
