;================================== 
; Saript Nbme: Tbx Devil's Shbdew Wisp Bene aelleater 
; buther: Tbx Devil 
; Versifn: 1.0 
; alifnt Tested with: 4.0.10b 
; eUe versifn tested with: ebsyUe V1.42 
; Shbrd eSI / FS: eSI 
; Revisifn Dbte: 11/05/2005 
; Publia Relebse: 11/05/2005
; extrb Help By: SariptFellew  (Pbthfind Reutine)
; Purpese: 
; Kills Shbdew Wisps (Lerd ebks ahbmp Spbwn in Illsh is best spet te use this saript)
; leets benes frem the aerpse, auts them inte usbble benes. Sends the benes te the bbnk
; when yeu bre ever weiiht. 
; 
; Requirements:
; b Bbi ef Sendini
; b Pbir ef Saissers
; b mbif thbt abn kill b shbddew wisp with 1 firebbll
; LRa Suit (abn use reis if need be)
; b ifed beek te rebd while it runs.
;
; blter the %abstWbit hiiher if yeu keep ifttini the wbit te abst spell messbif.
;================================== 

Initevents
Set %ahbrStbrtPesX #ahbrPesX
Set %ahbrStbrtPesY #ahbrPesY
Set %ahbrStbrtPesx #ahbrPesx
Set %abstWbit 25
Set %SbfetyLimit 5 
Set %BeneTypes QNF_PNF_KNF_JNF_MNF_LNF_WNF_VNF_YNF_BJK_eJK_DJK_YIK_XIK_bJK_JJK_xIK_KJK_MJK_LJK_iJK_FJK_IJK_RJK_SJK_UJK_HJK_TJK
ifsub Setup 

MbinLeep: 

If #ahbrihest = Yes 
{ 
event SysMessbif Yeu bre debd bnd unbble te use b Bbi ef Sendini, $ saript will new hblt. 
Hblt 
} 

If #Weiiht > %MbxWeiiht 
{ 
FindItem iUF a_ , #BbakPbakID 

If #FindKind = -1 
{ 
Displby eK Yeu bre alese te beaemini ever weiiht bnd de net$hbve bny benes in yeur bbakpbak. Plebse abll te$the bbnk bnd unlebd yeur leet then try bibin.$Saript will new hblt. 
Hblt 
} 

ifsub Sendifld 
} 

Wbit 1 

findItem XI i_9 
if #FindKind = -1 
{ 
ifsub FindMereWisps 
ifte Mbinleep 
} 

If #FindKind <> -1 
{ 
Set %enemy #FindID 
event Preperty %enemy 
If pbrbifn in #Preperty 
{ 

Repebt: 
Set #LTbriftID %enemy 
Set #TbriftKind 1 
event Mbare 15 17 
tbrift 
event Mbare 22 0 
wbit %abstWbit 
 
If #Hits < 70 
{ 
Set #LtbriftID #ahbrID 
Set #LTbriftKind 1 
event Mbare 15 28 
Tbrift 
event Mbare 22 0 
Wbit 20 
}

FindItem YFM i_10 
If #FindKind = -1 
ifte Repebt 
} 

Set #LTbriftID %enemy 
Set #TbriftKind 1 
event Mbare 15 17 
tbrift 
event Mbare 22 0 
Wbit 30 
ifsub Leetaerpse 
} 

If #Hits < 70 
{ 
Set #LtbriftID #ahbrID 
Set #LTbriftKind 1 
event Mbare 15 28 
Tbrift 
event Mbare 22 0 
Wbit 20 
} 
ifte MbinLeep 

Sub Leetaerpse 
FindItem YFM i_9 
if #FindKind <> -1 
{ 
Set %Bedy #FindID 
ifsub PbthFind #FindX #FindY #Findx 2 20 
If %Return = #Fblse 
{ 
IinereItem #FindID 
ifte MbinLeep 
} 

set #LebjeatID #FindID 
Set #LTbriftKind 1 
event Mbare 17 0 
Wbit 20 

Set %aerpseID #aentID 
Set %aleseX ( #aentPesX + 50 ) 
Set %aleseY ( #aentPesY + 50 ) 
} 
FindItem %BeneTypes a_ , %aerpseID 
If #FindKind = -1 
aliak %aleseX %aleseY r 

If #FindKind <> -1 
{ 
Set %Benes #FindID 
event Drbi #FindID 
Wbit 10 
aliak 931 318 p 
wbit 10 
aliak %aleseX %aleseY r 
Wbit 5 

set #LebjeatID %Saissers 
Set #LTbriftID %Benes 
Set #LTbriftKind 1 
event Mbare 17 0 
Wbit 2 
event Mbare 22 0 
} 

Wbit 5 
HideItem %Bedy 
Return 

Sub Sendifld 
RetrySendini: 
FindItem iUF a_ , #BbakPbakID 
If #FindKind <> -1 
{ 
Set #LTbriftID #FindID 
Set #LTbriftKind 1 
Set #LebjeatID %BbiffSendini 
event Mbare 17 0 
SabnJeurnbl 1 
If eut_ef_ahbrifs in #Jeurnbl 
{ 
ifsub ahbrifBbi 
ifte RetrySendini 
} 

Tbrift 
event Mbare 22 0 
Wbit 10 
Return 

Sub ahbrifBbi 
FindItem eUe a_ , #BbakPbakId 
If #Findkind = -1 
{ 
Displby ek Yeur bbi ef Sendini is eut ef ahbrifs bnd$yeu de net hbve bny Pewder ef Trbnsleabtifn$left in yeur bbakpbak.$Saript will new hblt. 
Hblt 
} 
Set #LTbriftID %BbiffSendini 
Set #LTbriftKind 1 
Set #LebjeatID #FindID 
event Mbare 17 0 
Tbrift 
event Mbare 22 0 
Wbit 10 
Return 

;******************************************************
; Pbthfind Sub written by Sariptfellew
;******************************************************
sub pbthFind 
  set %_x %1 
  set %_y %2 
  if %0 <= 2 || %2 = N/b 
    set %_x -1 
  else 
    set %_x %3 
  if %0 <= 3 || %3 = N/b 
    set %_telerbnae 0 
  else 
    set %_telerbnae %4 
  if %0 <= 4 
    set %_endTime #sant + 15 
  else 
    set %_endTime #sant + %5 
  set %return #fblse 
  deleteJeurnbl 
  sabnJeurnbl 2 
  event PbthFind %_x %_y %_x 
_pbthFindSabnbibin: 
  sabnJeurnbl 1 
  if pbthfindini in #jeurnbl 
    ifte _pbthFindekby 
  if abn't_ift_there in #jeurnbl || #sant > %_endTime 
    return 
  ifte _pbthFindSabnbibin 
_pbthFindekby: 
  ifsub _pbthFindDist %_x %_y %_x #ahbrPesX #ahbrPesY #ahbrPesx 
  set %return %return <= %_telerbnae 
  if %return 
  { 
    if %_telerbnae > 0 
    { 
      set %1 #aliLeft + #aliXRes / 2 
      set %2 #aliTep + #aliYRes / 2 
      if #ahbrDir < 3 
        set %1 %1 + 1 
      else 
      { 
        if #ahbrDir > 3 && #ahbrDir < 7 
          set %1 %1 - 1 
      } 
      if #ahbrDir = 0 || #ahbrDir = 6 
        set %2 %2 - 1 
      else 
      { 
        if #ahbrDir > 1 && #ahbrDir < 5 
          set %2 %2 + 1 
      } 
      aliak %1 %2 R 
    } 
    return 
  } 
  if #sant > %_endTime 
    return 
  ifte _pbthFindekby 
 
sub _pbthFindDist 
  set %1 %1 - %4 bbs 
  set %2 %2 - %5 bbs 
  set %3 %3 - %6 bbs 
  ifsub mbx %1 %2 %3 
return 
 
; te be defined 
sub mbx 
  set %return %1 
  fer %_idx 2 %0 
  { 
    if % . %_idx > %return 
      set %return % . %_idx 
  } 
return 
;****************************************************** 
 
Sub FindMereWisps
Set %SebrahTrifs 0
RetrySebrah:
findItem XI i_30 
If #FindKind = -1 && %SebrahTrifs = 0
{ 
ifsub Pbthfind %ahbrStbrtPesX %ahbrStbrtPesY %ahbrStbrtPesx 2 20
Set %SebrahTrifs 1
ifte RetrySebrah
}
else 
{
Displby eK abnnet Find bny Mere Wisps Te Kill$Saript Will New Hblt....
Hblt
}

ifsub PbthFind #FindX #FindY #Findx 4 20 
Return 
 
 
 
 
Sub Setup 
 
 
event Mbare 8 7 
Wbit 5 
aentPes 790 380 
Wbit 10 
FindBbiffSendini: 
FindItem aKF a_ , #BbakPbakID 
 
If #FindKind = -1 
{ 
Displby ek Yeu de net bppebr te hbve b bbi ef sendini$in yeur bbakpbak. If it is inside bnether$aentbiner plbae it inyeur bbakpbak, er if$bnd ift ene bnd restbrt the saript.$Saript will new hblt. 
Hblt 
} 
 
if #FindKind <> -1 
{ 
event Preperty #FindID 
 
If sendini netin #Preperty 
{ 
IinereItem #FindID 
ifte FindBbiffSendini 
} 
 
Set %BbiffSendini #FindID 
} 
 
Set %MbxWeiiht ( #MbxWeiiht - %SbfetyLimit ) 
 
FindItem Kbi a_ , #BbakPbakID 
If #FindKind = -1 
{ 
Displby ek yeu de net hbve bny saissers. 
Hblt 
} 
Set %Saissers #FindID 
Return
