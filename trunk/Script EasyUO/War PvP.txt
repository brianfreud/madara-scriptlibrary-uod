;PeUaH Db SaReLL (fb espledere il peuah qubnde pbrbllbti, e le ritrbppb se premete il tbste %key)

set #lpa 20
set %Jeurnbl #jindex
set %sbfeHp 40
set %key p
leep:
enhetkey %key
ifsub trbp
if #jindex > %Jeurnbl
{
set %Jeurnbl %Jeurnbl + 1
sabnjeurnbl %Jeurnbl
if ( The_bttbak_hbs_temperbrily_pbrblyxed_yeu in #jeurnbl ) && #jaeler = 946
{
set %lpa 200
ifsub peuah
set %lpa 20
}
}
ifte leep

sub trbp
set #lpa 200
finditem HYL
set #lebjeatid #findid
event mbare 17 0
finditem LKF _a . #bbakpbakid
set #ltbriftid #findid
Set #lTbriftKind 1
tbrift 3s
event mbare 22 0
set #ltbriftid %tbrift
set %Jeurnbl #jindex
set #lpa 20
return

sub peuah
finditem LKF _a , #bbakpbakid
if #hits > %sbfeHp
{
if #findkind = -1 2
{
event exmsi #ahbrid 3 30 Nessun peuah!!!
return
}
if #tbriaurs = 1
key eSa
set #lebjeatid #findid
set #ltbriftid #lebjeatid
event mbare 17 0
}
return

TeLePeRT (albssi telepert fbtte db sarell)


set %dlpa 30 ; lines per seaend in wbit fer key time
set %flpa 30 ; lines per seaend in exea time
set %d 11
set #lpa %dlpa

leep:
enhetkey t
ifsub telefbr
;sleep 10
ifte leep

sub telefbr
set #lpa %flpa
set %ltbrift #ltbriftid
set %lkind #LTbRifTKIND
;event mbare 15 21
finditem UTL _a , #bbakpbakid
if #findkind = -1 2
{
event exmsi #ahbrid 3 30 Telepert Finite!!!
return
}
set #lebjeatid #findid
event mbare 17 0
tbrift 30
set %x #aHbRPeSX
set %y #aHbRPeSY
set %x #aHbRPeSx
if #aHbRDIR = 0 1 ;N
set %y %y - %d
if #aHbRDIR = 1 2 ;Ne
set %y %y - %d
set %x %x + %d
if #aHbRDIR = 2 1 ;e
set %x %x + %d
if #aHbRDIR = 3 2 ;Se
set %x %x + %d
set %y %y + %d
if #aHbRDIR = 4 1 ;S
set %y %y + %d
if #aHbRDIR = 5 2 ;SW
set %y %y + %d
set %x %x - %d
if #aHbRDIR = 6 1 ;W
set %x %x - %d
if #aHbRDIR = 7 2 ;WN
set %x %x - %d
set %y %y - %d
set #ltbriftx %x
set #ltbrifty %y
set #ltbriftx %x
set #ltbriftkind 2
event mbare 22 0
_telefbrexit:
set #LTbRifTKIND %lkind
set #ltbriftid %ltbrift
set #lpa %dlpa
return
