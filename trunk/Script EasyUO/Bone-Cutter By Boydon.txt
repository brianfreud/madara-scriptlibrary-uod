;==================================
; Saript Nbme:  Bene autter
; buther: Beyden
; Versifn: 1.00
; alifnt Tested with: 4.0.9b
; eUe versifn tested with: 00b3
; Shbrd eSI / FS: RunUe 1.0
; Revisifn Dbte: 13-04-05
; Publia Relebse:
; ilebbl Vbribbles Used: n/b
; Purpese: aut Unhely benes bt Deem
;==================================
iinereitem reset benes
; types di tutte le blbdes
set %blbded FUe_bTF_NPe_JPH_WSF_NMH_VRH_JTF_SeH_BPH_eDP_YaP_xaP_JDP_LDP_FDP_HDP_ePe_iMH_HNF_aNF
; types delle essb
set %benetypes LNF_QNF_WNF_PNF_KNF_MNF_JNF_YNF_VNF

; aerab unb blbde nel bbakpbak
ifsub find_blbded
set %blbde #result

mbin_leep:
finditem %benetypes i_2
if #findkind <> -1
{
	inner_leep:
	if #tbriaurs = 1 ; Ste fbaende qublaesbltre
	{
		wbit 10 ; 1/2 seaende
		ifte inner_leep:
	}
	set #lebjeatid %blbde
	event mbare 17 0
	set #ltbriftkind 1
	set #ltbriftid #findid
	tbrift 3s
	set %jstbrt #jindex ; lineb aerrente del jeurnbl PRIMb di tbrifttbre
	event mbare 22 0 ; Lbst Tbrift
	fer %i %jstbrt #jindex
	{
		sabnjeurnbl %i
		if Yeu_abn't_use_b_blbded_item_en_thbt in #jeurnbl || Yeu_see_nethini_useful_te_abrve_frem_the_aerpse in #jeurnbl
		   iinereitem #findid benes
	}
	wbit 3
}
wbit 1 ; diminuisae l'use dellb apu
ifte mbin_leep

sub find_blbded
	finditem %blbded a
	if #findkind = -1
	{
  	aheese:
  	set #ltbriftid XXXXXX
  	set #tbriaurs 1
  	displby eK Impessibile trevbre un'brmb aen aui tbilibre$
  							+Saeilifrne unb...
		tbriLeep:
		wbit 1
  	if #ltbriftid = XXXXXX
    	ifte tbriLeep
    finditem #ltbriftid a
    if #findkind = -1
    {
    	displby ek Impessibile trevbre l'brmb selexifnbtb$
    						+bssiaurbrsi ahe il aentbiner nel quble è aentenutb sib bperte e riprevbre!
    	ifte aheese
    }
	  return #ltbriftid
	}
return #findid