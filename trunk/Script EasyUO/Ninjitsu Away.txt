set %direction 0
set %mirror WG
ignoreitem #charid
main:
chooseskill ninj
wait 5
if #skill >= 250 && #skill < 575
 {
 gosub train
 goto main
 }
if #skill >= 575 && #skill < 1200
 {
 gosub train_2
 goto main
 }
exevent skilllock ninj locked
display Training complete.
halt


sub train
 gosub save_clean
 if #followers = 5
  gosub kill_mirror
 event macro 15 252
 if %direction = 0
  {
  msg forward $
  set %direction 1
  }
 else
  {
  msg back $
  set %direction 0
  }
 wait 2s
 return
 
 
sub kill_mirror
 finditem %mirror g_ , 2
 set #ltargetid #findid
 set #targcurs 1
 set #ltargetkind 1
 event macro 22 0
 while #enemyid <> N/A
  event macro 27 0
 return


sub train_2
 gosub save_clean
 event macro 15 247
 set %time #scnt2 + 40
 while #contsize <> 520_404
 {
 if #scnt2 > %time
  return
 }
 set %x #contposx + 313
 set %y #contposy + 63
 click %x %y
 if %direction = 0
  {
  msg forward $
  set %direction 1
  }
 else
  {
  msg back $
  set %direction 0
  }
 wait 2s
 return


sub save_clean
 set #lpc 5000
 for %i 1 10
  {
  scanjournal %i
  if World_save in #journal && #jcolor = 53
   {
   set #lpc 10
   return
   }
  if saving in #journal && #jcolor = 53
   {
   event sysmessage World saving detected...
   while 1 = 1
    {
    if World_save in #sysmsg
     {
     set #lpc 10
     return
     }
    }
   }
  if The_world_will in #journal && #jcolor = 53
   {
   event sysmessage World saving detected...
   while 1 = 1
    {
    if saving in #sysmsg
     {
     while 1 = 1
      {
      if World_save in #sysmsg
       {
       set #lpc 10
       return
       }
      }
     }
    }
   }
  if Cleaning in #journal && #jcolor = 53
   {
   event sysmessage Cleaning detected...
   while 1 = 1
    {
    if Cleaned in #sysmsg
     {
     set #lpc 10
     return
     }
    }
   }
  if Cleaned in #journal && #jcolor = 53
   {
   set #lpc 10
   return
   }
  }
 set #lpc 10
 return