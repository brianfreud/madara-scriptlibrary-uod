; By Marino(Aeron)
;==================================
                              ; Poisoning.txt


INITEVENTS

; ### Start of config section.

; Item types to be poisoned.
SET %PTarget TSF

; Please set hitpoints here (script will start healing below this number)
SET %Hits 75

; Do you want the script to hide you? (1 = yes / 0 = no)
SET %Hide 0

; Do you want to attempt to re-poison the same blade again on gain?
; At higher skill levels (90+) re-poisoning gains only happen about 10-20%
; of the time from my experiance, please correct me if I am wrong.
; (1 = yes / 0 = no)
SET %RePoison = 0

; ### End of config section.

; ### Do not edit past this line.
; ### Unless of course you know what you are doing
; Init for gain checks (This is not a config option, it initializes the re-posion on gain marker)
SET %Gain 0

EVENT SYSMESSAGE This Script will start shortly.
CHOOSESKILL POIS REAL

CheckBlades
FINDITEM %PTarget
IGNOREITEM #FINDID
IF #FINDKIND = -1
{
EVENT SYSMESSAGE Sorry, I could not find any blades to be poisoned.
EVENT SYSMESSAGE Please open a secure with blades and restart.
EVENT SYSMESSAGE Thank you.
HALT
}
IF #FINDKIND = 1
{
GOTO CheckBlades
}
IGNOREITEM RESET

FindKeg:
FINDITEM QMJ
IGNOREITEM #FINDID
SET %Kegid #FINDID
IF #FINDKIND = -1
{
EVENT SYSMESSAGE Sorry, I could not find a keg of poison.
EVENT SYSMESSAGE Please get a keg of poison and restart.
EVENT SYSMESSAGE Thank you.
HALT
}
IF #FINDKIND = 1
{
GOTO FindKeg
}

Begin:
SET %Skill #SKILL
SET %Hidden 0

Hide:
IF %Hide = 1
{
IF H NOTIN #CHARSTATUS
 {
 EVENT MACRO 13 21
 WAIT 2s 20
 SET %Hidden 1
 GOTO Hide
 }
IF %Hidden <> 0
 {
 WAIT 6s 20
 }
}

SET #LOBJECTID %Kegid
TARGET
EVENT MACRO 17
WAIT 10
SCANJOURNAL 1
IF is_empty IN #JOURNAL
{
GOTO FindKeg
}

FindBottle:
FINDITEM WUF
IF #FINDKIND = 1
{
IGNOREITEM #FINDID
GOTO FindBottle
}

FillBottle:
SET #LTARGETID #FINDID
SET #LTARGETKIND 1
EVENT MACRO 22
WAIT 30 20

PoisonIt:
EVENT MACRO 13 30
TARGET

FindPotion:
FINDITEM AVF
IF #FINDKIND = 1
{
IGNOREITEM #FINDID
GOTO FindPotion
}

TargetPotion:
SET #LTARGETID #FINDID
SET #LTARGETKIND 1
EVENT MACRO 22
WAIT 20
TARGET

FindBlade:
IF %Gain < 1
{
FINDITEM %PTarget
SET %PrevBlade #FINDID
IF #FINDKIND = 1
 {
 IGNOREITEM #FINDID
 GOTO FindBlade
 }
IF #FINDKIND = -1
 {
 IGNOREITEM RESET
 GOTO FindBlade
 }
}

TargetBlade:
IF %Gain > 0
{
SET #LTARGETID %PrevBlade
}
IF %Gain < 1
{
SET #LTARGETID #FINDID
}
SET #LTARGETKIND 1
EVENT MACRO 22
WAIT 20
IF %RePoison = 0
{
IGNOREITEM %PrevBlade
SET %Gain 0
GOTO Cure
}

IF %Skill < #SKILL
{
SET %Gain %Gain + 1
}
IF %Skill = #SKILL
{
IGNOREITEM %PrevBlade
SET %Gain 0
}

WAIT 6s 25
GOTO Begin

; EOF